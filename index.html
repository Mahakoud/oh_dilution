<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Calcul d‚ÄôEnsemencement Cytog√©n√©tique</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f4f8; padding: 20px; }
    h1 { color: #005b7f; }
    label { display: block; margin-top: 15px; }
    input, select { padding: 8px; width: 100%; max-width: 300px; }
    button { margin-top: 20px; padding: 10px 20px; background: #0077b6; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background: #005f8a; }
    .result { margin-top: 20px; font-size: 1.2em; color: #2a5d27; }
  </style>
</head>
<body>

  <h1>Calcul du Volume de Culot Cellulaire</h1>

  <label for="gb">GB (en GB/ŒºL) :</label>
  <input type="number" id="gb" placeholder="Ex : 50000" required>

  <label for="dilution">Facteur de dilution (ex : 10 pour 1/10) :</label>
  <input type="number" id="dilution" value="10" required>

  <label for="volume">Volume final de culture (en mL) :</label>
  <input type="number" id="volume" placeholder="Ex : 10" value="10" required>

  <label for="concentration">Concentration cible :</label>
  <select id="concentration">
    <option value="1.8">1.8 M/mL (J1)</option>
    <option value="1.5">1.5 M/mL (J2)</option>
  </select>

  <button onclick="calculer()">Calculer</button>

  <div class="result" id="resultat"></div>

  <script>
    function calculer() {
      const gb = parseFloat(document.getElementById("gb").value);
      const dilution = parseFloat(document.getElementById("dilution").value);
      const volumeFinal = parseFloat(document.getElementById("volume").value);
      const concFinale = parseFloat(document.getElementById("concentration").value);

      if (isNaN(gb) || gb <= 0 || isNaN(dilution) || dilution <= 0 || isNaN(volumeFinal) || volumeFinal <= 0) {
        document.getElementById("resultat").innerHTML = "Veuillez entrer des valeurs valides.";
        return;
      }

      // üîÅ Correction : appliquer le facteur de dilution en multipliant
      const concInitiale = (gb * 1000 / 1_000_000) * dilution; // M/mL

      const volumeCulot = (concFinale * volumeFinal) / concInitiale;

      document.getElementById("resultat").innerHTML =
        `‚û°Ô∏è Volume de culot √† pr√©lever : <strong>${volumeCulot.toFixed(3)} mL</strong><br>` +
        `‚û°Ô∏è Compl√©ter avec <strong>${(volumeFinal - volumeCulot).toFixed(3)} mL</strong> de milieu de culture.`;
    }
  </script>

</body>
</html>
